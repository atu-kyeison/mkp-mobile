import React, { createContext, useCallback, useContext, useMemo, useState } from 'react';
import { Settings } from 'react-native';

type SupportedLocale = 'en' | 'es';

type Dictionary = Record<string, string>;

const dictionaries: Record<SupportedLocale, Dictionary> = {
  en: {
    'nav.home': 'HOME',
    'nav.journey': 'JOURNEY',
    'nav.church': 'CHURCH',
    'nav.profile': 'PROFILE',

    'auth.brand': 'MY KINGDOM PAL',
    'auth.welcome.title': 'Walk with the Word all week.',
    'auth.welcome.subtitle': 'Helping Believers Live the Word Every Day - Beyond Sunday',
    'auth.welcome.join': 'JOIN YOUR CHURCH',
    'auth.welcome.haveAccess': 'I ALREADY HAVE ACCESS',
    'auth.footer.prefix': 'By continuing, you agree to our',
    'auth.footer.terms': 'Terms of Service',
    'auth.footer.and': 'and',
    'auth.footer.privacy': 'Privacy Policy',
    'legal.header': 'LEGAL',
    'legal.terms.title': 'Terms of Service',
    'legal.terms.accept': 'ACCEPT TERMS',
    'legal.terms.quote': '"This agreement supports our community and your journey."',
    'legal.terms.s1.title': 'Acceptance of Terms',
    'legal.terms.s1.body': 'By entering this digital sanctuary, you acknowledge and agree to abide by the principles of our community. Your journey with us is built upon mutual respect and spiritual integrity.',
    'legal.terms.s2.title': 'User Conduct',
    'legal.terms.s2.body': 'Members are expected to engage with kindness and compassion. Harassment, divisive language, or any behavior that disrupts the tranquility of the Kingdom Pal environment is strictly prohibited.',
    'legal.terms.s3.title': 'Sacred Use Guidelines',
    'legal.terms.s3.body': 'The resources, messages, and tools provided are for personal spiritual growth and communal edification. Reproduction or commercial redistribution of these sacred materials is not permitted without divine or administrative consent.',
    'legal.terms.s4.title': 'Privacy & Grace',
    'legal.terms.s4.body': 'Your personal information is handled with the utmost reverence. We protect your data as we would a sacred trust, ensuring your journey remains private and secure.',

    'auth.signin.title': 'Welcome back',
    'auth.signin.subtitle': 'Continue your walk',
    'auth.signin.emailLabel': 'EMAIL ADDRESS',
    'auth.signin.passwordLabel': 'PASSWORD',
    'auth.input.emailPlaceholder': 'your@email.com',
    'auth.input.passwordPlaceholder': '••••••••',
    'auth.signin.error': "That didn't match our records. Check your details or reset your password.",
    'auth.signin.tryAgain': 'TRY AGAIN',
    'auth.signin.submit': 'SIGN IN',
    'auth.signin.forgot': 'Forgot password?',

    'auth.signup.title': 'Start your journey',
    'auth.signup.subtitle': 'Create an account to begin',
    'auth.signup.firstNameLabel': 'FIRST NAME',
    'auth.signup.firstNamePlaceholder': 'Enter your name',
    'auth.signup.ageLine': 'I confirm I am at least 16 years old.',
    'auth.signup.ageSubline': 'My Kingdom Pal is designed for ages 16+.',
    'auth.signup.submit': 'CREATE ACCOUNT',
    'auth.signup.hasAccount': 'Already have an account?',
    'auth.signup.signin': 'Sign in',

    'auth.churchSearch.title': 'Find your church',
    'auth.churchSearch.subtitle': 'Enter the code your church gave you to join the community.',
    'auth.churchSearch.codeLabel': 'CHURCH CODE',
    'auth.churchSearch.codePlaceholder': 'E.G. KINGDOM-24',
    'auth.churchSearch.submit': 'CONNECT',
    'auth.churchSearch.codeHelp': 'Where can I find my code?',
    'auth.churchSearch.helpTitle': 'Find Your Church Code',
    'auth.churchSearch.helpBody': 'Your church can provide this code from the Sunday slide, bulletin, or welcome team.',

    'auth.churchSuccess.title': "You're connected!",
    'auth.churchSuccess.description': 'Welcome to the family. Your journey with us begins today.',
    'auth.churchSuccess.submit': 'GO TO MY CHURCH',
    'auth.churchSuccess.continue': 'CONTINUE',
    'auth.churchSuccess.newBeliever': 'NEW TO FAITH? START HERE',

    'auth.passwordReset.title': 'Reset your password',
    'auth.passwordReset.subtitle': 'Enter your email and we’ll send you a reset link.',
    'auth.passwordReset.submit': 'SEND RESET LINK',
    'auth.passwordReset.remembered': 'Remember your password?',

    'auth.passwordEmailSent.title': 'Check your email',
    'auth.passwordEmailSent.subtitle': 'If an account exists for that email, you’ll receive a reset link in a few minutes.',
    'auth.passwordEmailSent.submit': 'RETURN TO SIGN IN',
    'auth.passwordEmailSent.resend': 'RESEND EMAIL',
    'auth.passwordEmailSent.useDifferent': 'USE A DIFFERENT EMAIL',
    'newBeliever.title': 'Welcome home.',
    'newBeliever.subtitle': 'We’re grateful you’re here. You don’t have to have it all figured out. This is a gentle beginning.',
    'newBeliever.next': 'WHAT HAPPENS NEXT',
    'newBeliever.step1': 'Join your church community',
    'newBeliever.step2': 'Receive Sunday’s message in a simple recap',
    'newBeliever.step3': 'Walk one small step each day this week',
    'newBeliever.privacy': 'Your journal is private — a space between you and God.',
    'newBeliever.prayerStart': 'I want to start with a prayer',

    'settings.section.language': 'LANGUAGE',
    'settings.header': 'SETTINGS',
    'settings.title': 'Adjust your experience, not your formation.',
    'settings.language.label': 'App Language',
    'settings.language.en': 'English',
    'settings.language.es': 'Español',
    'settings.section.theme': 'THEME',
    'settings.theme.label': 'Atmosphere',
    'settings.theme.midnight': 'Midnight Reverence',
    'settings.theme.dawn': 'Dawn Mercy',
    'settings.section.formation': 'FORMATION PREFERENCES',
    'settings.formation.reminders': 'Gentle Reminders',
    'settings.formation.remindersHint': 'Receive a quiet daily nudge to pause.',
    'settings.formation.privacyInfo': 'Your reflections remain private. You choose what to share.',
    'settings.section.care': 'CARE & COMMUNICATION',
    'settings.care.churchMessages': 'Church Messages',
    'settings.care.encouragement': 'Encouragement',
    'settings.section.help': 'HELP & SUPPORT',
    'settings.help.faq': 'Get Help & FAQ',
    'settings.section.account': 'ACCOUNT',
    'settings.account.connectedChurch': 'Connected Church',
    'settings.account.connectedChurchUnknown': 'No church connected yet',
    'settings.account.changeChurch': 'Change church',
    'settings.account.signOut': 'Sign Out',
    'settings.footer': 'MKP supports your journey — your church leads it.',

    'care.home.title': 'How can we walk with you?',
    'care.header': 'CARE',
    'care.home.prayer.label': 'PRAYER REQUEST',
    'care.home.prayer.prompt': 'What would you like prayer for today?',
    'care.home.prayer.action': 'SHARE PRAYER',
    'care.home.needMore': 'Need more than prayer?',
    'care.home.gratitude.label': 'GRATITUDE',
    'care.home.gratitude.prompt': 'Where have you seen God’s faithfulness this week?',
    'care.home.gratitude.action': 'SHARE GRATITUDE',
    'care.home.footer': 'Your community is here to hold you in prayer.',

    'care.support.title': 'How can we support you right now?',
    'care.support.section.type': 'WHAT KIND OF SUPPORT?',
    'care.support.section.message': 'YOUR MESSAGE',
    'care.support.section.contact': 'PREFERRED CONTACT',
    'care.support.placeholder': 'Tell us how we can walk with you...',
    'care.support.crisis': 'If you are in immediate danger, call local emergency services.',
    'care.support.send': 'SEND REQUEST',
    'care.support.sending': 'Sending your message...',
    'care.support.error': 'Something went wrong. Your message may not have sent.',
    'care.support.retry': 'TRY AGAIN',
    'care.support.saveLocal': 'SAVE LOCALLY',
    'care.support.saved.title': 'Saved on this device',
    'care.support.saved.body': 'Your message is saved locally for now. You can submit it again later.',
    'care.support.type.pastor': 'A conversation with a pastor',
    'care.support.type.discipleship': 'Discipleship / next steps',
    'care.support.type.accountability': 'Accountability support',
    'care.support.type.prayer': 'Prayer in person or by call',
    'care.support.type.difficult': "I'm going through something difficult",
    'care.support.type.newBeliever': 'I recently gave my life to Christ',
    'care.support.type.other': 'Other',
    'care.support.contact.call': 'Call',
    'care.support.contact.text': 'Text',
    'care.support.contact.email': 'Email',

    'care.success.kicker': 'CARE SUPPORT',
    'care.success.title': 'You’re not alone.',
    'care.success.message': 'Your church team has been notified. Someone will reach out as soon as they’re able.',
    'care.success.disclaimer': 'If you are in immediate danger, call local emergency services.',
    'care.success.back': 'BACK TO CARE',
    'care.success.returnHome': 'RETURN TO HOME',
    'care.success.submitPrayer': 'SUBMIT A PRAYER',

    'care.prayer.alert.title': 'Prayer Submitted',
    'care.prayer.alert.body': 'Your request has been received. A pastor will review it in the dashboard.',
    'care.prayer.alert.done': 'DONE',
    'care.prayer.alert.needSupport': 'NEED MORE SUPPORT',
    'care.prayer.title': 'How can we pray for you?',
    'care.prayer.label': 'PRAYER REQUEST',
    'care.prayer.placeholder': 'What would you like prayer for today?',
    'care.prayer.action': 'SHARE PRAYER',
    'care.prayer.anonymous.title': 'Post Anonymously',
    'care.prayer.anonymous.subtitle': 'Your name will be hidden from the care team view',
    'care.prayer.support.title': 'Request Pastoral Support',
    'care.prayer.support.subtitle': 'A leader will reach out to walk with you',

    'care.testimony.alert.title': 'Testimony Submitted',
    'care.testimony.alert.body': 'Your testimony has been sent and will appear in the pastor dashboard.',
    'care.testimony.title': 'Where have you seen God’s faithfulness?',
    'care.testimony.label': 'TESTIMONY',
    'care.testimony.placeholder': 'Share a moment of grace...',
    'care.testimony.anonymous': 'Share anonymously',
    'care.testimony.allowShare': 'Allow church to share this as encouragement',
    'care.testimony.action': 'SHARE GRATITUDE',
    'care.testimony.footer': 'Your story strengthens the church.',

    'journey.title': 'Journey',
    'journey.library': 'LIBRARY',
    'journey.favorites': 'FAVORITES',
    'journey.calendar': 'CALENDAR',
    'journey.favoritesEmpty': 'Your journey will appear here over time.',
    'journey.favoritesCta': 'WRITE YOUR FIRST REFLECTION',
    'journey.quick.insights': 'INSIGHTS HOME',
    'journey.quick.awareness': 'PAST AWARENESS',
    'journey.legend.reflection': 'Reflection',
    'journey.legend.mood': 'Mood',
    'journey.legend.sunday': 'Sunday',
    'journey.emptyPrompt': 'Select a day to revisit your walk.',
    'journey.dayDetail.title': 'Day Detail',
    'journey.dayDetail.loading': 'Loading day...',
    'journey.dayDetail.innerPosture': 'INNER POSTURE',
    'journey.dayDetail.reflection': 'REFLECTION',
    'journey.dayDetail.fromSunday': 'FROM SUNDAY',
    'journey.dayDetail.empty': 'No entries saved for this day.',
    'journey.dayDetail.addReflection': 'ADD A REFLECTION',
    'journey.dayDetail.logMood': 'LOG A MOOD',
    'journey.dayDetail.readOnlyPast': 'Past days are view-only.',
    'journey.dayDetail.error': 'Could not load this day.',
    'journey.dayDetail.retry': 'RETRY',

    'reflection.subtitle.today': "TODAY'S REFLECTION",
    'reflection.subtitle.midweek': 'MIDWEEK REFLECTION',
    'reflection.invitation.dailyLabel': 'DAILY INVITATION',
    'reflection.invitation.midweekLabel': 'MIDWEEK INVITATION',
    'reflection.invitation.dailyText': '"What stayed with you today?"',
    'reflection.invitation.midweekText': '"What is God bringing to the surface in you today?"',
    'reflection.placeholder': 'Write your reflection here...',
    'reflection.save': 'SAVE TO JOURNEY',
    'reflection.update': 'UPDATE REFLECTION',
    'reflection.needMore': 'Need more than prayer?',
    'reflection.privacy': 'This space is between you and God. Your reflections stay private.',
    'reflection.detail.title': 'REFLECTION',
    'reflection.detail.sundayMessage': "SUNDAY'S MESSAGE",
    'reflection.detail.invitation': 'THE INVITATION',
    'reflection.detail.words': 'YOUR WORDS',
    'reflection.detail.empty': 'No reflection saved for this entry.',
    'reflection.detail.backToJourney': 'BACK TO JOURNEY',
    'reflection.detail.edit': 'EDIT',
    'reflection.detail.delete': 'DELETE',
    'reflection.detail.deleteTitle': 'Delete reflection?',
    'reflection.detail.deleteBody': 'This will permanently remove the reflection from your journey history.',
    'reflection.detail.cancel': 'Cancel',
    'reflection.moodCurrent': 'Current mood:',
    'reflection.quote': '"A moment with God is never wasted."',

    'insights.header': 'INSIGHTS',
    'insights.title': 'Notice how this week has felt.',
    'insights.rhythm': 'THIS WEEK’S RHYTHM',
    'insights.earlier': 'Earlier',
    'insights.now': 'Now',
    'insights.optional': 'Based on your optional check-ins',
    'insights.reflectionPresence': 'REFLECTION PRESENCE',
    'insights.reflectionStat': 'You paused to reflect 3 days this week',
    'insights.reflectionSub': 'Reflection was part of your week',
    'insights.notice': 'SOMETHING WE NOTICED',
    'insights.noticeText': '"Weeks where you pause midweek often feel steadier."',
    'insights.footer': 'These insights are for awareness, not evaluation.',

    'mood.skip': 'SKIP',
    'mood.subtitle': 'EMOTIONAL AWARENESS',
    'mood.title': 'How are you feeling right now?',
    'mood.continue': 'CONTINUE',
    'mood.note': 'A moment for inner reflection.',
    'mood.needMore': 'Need more than prayer?',
    'mood.label.peaceful': 'Peaceful',
    'mood.label.rushed': 'Rushed',
    'mood.label.anxious': 'Anxious',
    'mood.label.grateful': 'Grateful',
    'mood.label.tired': 'Tired',
    'mood.label.focused': 'Focused',

    'moodDetail.subtitle': 'PAST AWARENESS',
    'moodDetail.innerPosture': 'INNER POSTURE',
    'moodDetail.journalEntry': 'JOURNAL ENTRY',
    'moodDetail.footer': 'Part of your weekly rhythm',
    'moodDetail.title.tired': 'Tired',
    'moodDetail.title.rushed': 'Rushed',
    'moodDetail.title.grateful': 'Grateful',
    'moodDetail.title.peaceful': 'Peaceful',
    'moodDetail.title.focused': 'Focused',
    'moodDetail.title.anxious': 'Anxious',
    'moodDetail.desc.tired': 'You marked this moment as tired. Low energy is a signal for rest, not a demand for productivity. You were invited to exhale and trust God with your weariness.',
    'moodDetail.desc.rushed': 'You marked this moment as rushed. This posture highlights pace, not failure. You were invited to slow your heart and find a moment of unhurried grace.',
    'moodDetail.desc.grateful': 'You marked this moment as grateful. This posture amplifies your awareness of God’s presence. You were invited to rest in this lighthearted joy.',
    'moodDetail.desc.peaceful': 'You marked this moment as peaceful. In this receptive state, you were invited to notice grace and listen for the quiet voice of God.',
    'moodDetail.desc.focused': 'You marked this moment as focused. Clarity and attention allowed your intentions to flow naturally. You were invited to walk purposefully in this alignment.',
    'moodDetail.desc.anxious': 'You marked this moment as anxious. This mental noise is simply a cue for prayer and gentleness. You were invited to breathe deeply and remember you are held.',

    'support.alert.title': 'Message Sent',
    'support.alert.body': 'Thanks for reaching out. A care team member will follow up.',
    'support.header': 'HELP',
    'support.title': 'How can we walk with you?',
    'support.messageLabel': 'YOUR MESSAGE',
    'support.placeholder': 'Tell us how we can support you...',
    'support.send': 'SEND MESSAGE',
    'support.faq': 'Browse FAQs',
    'support.guidelines': 'Sacred Use Guidelines',
    'support.footer': 'Our team is here to support your journey.',
    'faq.title': 'Frequently Asked Questions',
    'faq.q1': 'Is my journey really private?',
    'faq.a1': 'Yes. Your reflections stay on your device in this MVP and are only visible to you.',
    'faq.q2': 'What if I miss a formation day?',
    'faq.a2': 'There are no streaks here. God meets you exactly where you are.',
    'faq.q3': 'How can I support others?',
    'faq.a3': 'You can submit prayer and testimony in Care so your church team can follow up.',
    'faq.footerHint': 'Still seeking guidance?',
    'faq.supportCta': 'CONTACT PASTORAL SUPPORT',
  },
  es: {
    'nav.home': 'INICIO',
    'nav.journey': 'CAMINO',
    'nav.church': 'IGLESIA',
    'nav.profile': 'PERFIL',

    'auth.brand': 'MI REINO PAL',
    'auth.welcome.title': 'Camina con la Palabra toda la semana.',
    'auth.welcome.subtitle': 'Ayudando a los creyentes a vivir la Palabra cada día, más allá del domingo',
    'auth.welcome.join': 'ÚNETE A TU IGLESIA',
    'auth.welcome.haveAccess': 'YA TENGO ACCESO',
    'auth.footer.prefix': 'Al continuar, aceptas nuestros',
    'auth.footer.terms': 'Términos de Servicio',
    'auth.footer.and': 'y la',
    'auth.footer.privacy': 'Política de Privacidad',
    'legal.header': 'LEGAL',
    'legal.terms.title': 'Términos de Servicio',
    'legal.terms.accept': 'ACEPTAR TÉRMINOS',
    'legal.terms.quote': '"Este acuerdo respalda a nuestra comunidad y tu caminar."',
    'legal.terms.s1.title': 'Aceptación de Términos',
    'legal.terms.s1.body': 'Al entrar en este santuario digital, reconoces y aceptas cumplir los principios de nuestra comunidad. Tu caminar con nosotros se construye sobre respeto mutuo e integridad espiritual.',
    'legal.terms.s2.title': 'Conducta del Usuario',
    'legal.terms.s2.body': 'Se espera que los miembros participen con bondad y compasión. El acoso, el lenguaje divisivo o cualquier conducta que altere la tranquilidad del entorno de Kingdom Pal está estrictamente prohibida.',
    'legal.terms.s3.title': 'Lineamientos de Uso Sagrado',
    'legal.terms.s3.body': 'Los recursos, mensajes y herramientas provistos son para crecimiento espiritual personal y edificación comunitaria. La reproducción o redistribución comercial de estos materiales sagrados no está permitida sin consentimiento administrativo.',
    'legal.terms.s4.title': 'Privacidad y Gracia',
    'legal.terms.s4.body': 'Tu información personal se maneja con la máxima reverencia. Protegemos tus datos como un encargo sagrado, asegurando que tu caminar permanezca privado y seguro.',

    'auth.signin.title': 'Bienvenido de nuevo',
    'auth.signin.subtitle': 'Continúa tu caminar',
    'auth.signin.emailLabel': 'CORREO ELECTRÓNICO',
    'auth.signin.passwordLabel': 'CONTRASEÑA',
    'auth.input.emailPlaceholder': 'tu@correo.com',
    'auth.input.passwordPlaceholder': '••••••••',
    'auth.signin.error': 'No coincide con nuestros registros. Verifica tus datos o restablece tu contraseña.',
    'auth.signin.tryAgain': 'INTENTAR DE NUEVO',
    'auth.signin.submit': 'INICIAR SESIÓN',
    'auth.signin.forgot': '¿Olvidaste tu contraseña?',

    'auth.signup.title': 'Comienza tu camino',
    'auth.signup.subtitle': 'Crea una cuenta para empezar',
    'auth.signup.firstNameLabel': 'NOMBRE',
    'auth.signup.firstNamePlaceholder': 'Ingresa tu nombre',
    'auth.signup.ageLine': 'Confirmo que tengo al menos 16 años.',
    'auth.signup.ageSubline': 'My Kingdom Pal está diseñado para mayores de 16 años.',
    'auth.signup.submit': 'CREAR CUENTA',
    'auth.signup.hasAccount': '¿Ya tienes una cuenta?',
    'auth.signup.signin': 'Inicia sesión',

    'auth.churchSearch.title': 'Encuentra tu iglesia',
    'auth.churchSearch.subtitle': 'Ingresa el código que te dio tu iglesia para unirte.',
    'auth.churchSearch.codeLabel': 'CÓDIGO DE IGLESIA',
    'auth.churchSearch.codePlaceholder': 'EJ. REINO-24',
    'auth.churchSearch.submit': 'CONECTAR',
    'auth.churchSearch.codeHelp': '¿Dónde encuentro mi código?',
    'auth.churchSearch.helpTitle': 'Encuentra el código de tu iglesia',
    'auth.churchSearch.helpBody': 'Tu iglesia puede compartir este código en la pantalla del domingo, boletín o equipo de bienvenida.',

    'auth.churchSuccess.title': '¡Estás conectado!',
    'auth.churchSuccess.description': 'Bienvenido a la familia. Tu camino con nosotros comienza hoy.',
    'auth.churchSuccess.submit': 'IR A MI IGLESIA',
    'auth.churchSuccess.continue': 'CONTINUAR',
    'auth.churchSuccess.newBeliever': '¿NUEVO EN LA FE? COMIENZA AQUÍ',

    'auth.passwordReset.title': 'Restablece tu contraseña',
    'auth.passwordReset.subtitle': 'Ingresa tu correo y te enviaremos un enlace de restablecimiento.',
    'auth.passwordReset.submit': 'ENVIAR ENLACE',
    'auth.passwordReset.remembered': '¿Recuerdas tu contraseña?',

    'auth.passwordEmailSent.title': 'Revisa tu correo',
    'auth.passwordEmailSent.subtitle': 'Si existe una cuenta con ese correo, recibirás un enlace en unos minutos.',
    'auth.passwordEmailSent.submit': 'VOLVER A INICIAR SESIÓN',
    'auth.passwordEmailSent.resend': 'REENVIAR CORREO',
    'auth.passwordEmailSent.useDifferent': 'USAR OTRO CORREO',
    'newBeliever.title': 'Bienvenido a casa.',
    'newBeliever.subtitle': 'Nos alegra que estés aquí. No tienes que tener todo resuelto. Este es un comienzo con gracia.',
    'newBeliever.next': 'LO QUE SIGUE',
    'newBeliever.step1': 'Únete a la comunidad de tu iglesia',
    'newBeliever.step2': 'Recibe el mensaje del domingo en un resumen sencillo',
    'newBeliever.step3': 'Da un paso pequeño cada día esta semana',
    'newBeliever.privacy': 'Tu journal es privado: un espacio entre tú y Dios.',
    'newBeliever.prayerStart': 'Quiero empezar con una oración',

    'settings.section.language': 'IDIOMA',
    'settings.header': 'AJUSTES',
    'settings.title': 'Ajusta tu experiencia, no tu formación.',
    'settings.language.label': 'Idioma de la app',
    'settings.language.en': 'Inglés',
    'settings.language.es': 'Español',
    'settings.section.theme': 'TEMA',
    'settings.theme.label': 'Atmósfera',
    'settings.theme.midnight': 'Reverencia de Medianoche',
    'settings.theme.dawn': 'Misericordia del Alba',
    'settings.section.formation': 'PREFERENCIAS DE FORMACIÓN',
    'settings.formation.reminders': 'Recordatorios suaves',
    'settings.formation.remindersHint': 'Recibe un recordatorio diario para pausar.',
    'settings.formation.privacyInfo': 'Tus reflexiones permanecen privadas. Tú decides qué compartir.',
    'settings.section.care': 'CUIDADO Y COMUNICACIÓN',
    'settings.care.churchMessages': 'Mensajes de la iglesia',
    'settings.care.encouragement': 'Mensajes de ánimo',
    'settings.section.help': 'AYUDA Y SOPORTE',
    'settings.help.faq': 'Ayuda y preguntas frecuentes',
    'settings.section.account': 'CUENTA',
    'settings.account.connectedChurch': 'Iglesia conectada',
    'settings.account.connectedChurchUnknown': 'Aún no hay una iglesia conectada',
    'settings.account.changeChurch': 'Cambiar iglesia',
    'settings.account.signOut': 'Cerrar sesión',
    'settings.footer': 'MKP apoya tu camino; tu iglesia lo guía.',

    'care.home.title': '¿Cómo podemos caminar contigo?',
    'care.header': 'CUIDADO',
    'care.home.prayer.label': 'PETICIÓN DE ORACIÓN',
    'care.home.prayer.prompt': '¿Por qué te gustaría que oremos hoy?',
    'care.home.prayer.action': 'COMPARTIR ORACIÓN',
    'care.home.needMore': '¿Necesitas más que oración?',
    'care.home.gratitude.label': 'GRATITUD',
    'care.home.gratitude.prompt': '¿Dónde has visto la fidelidad de Dios esta semana?',
    'care.home.gratitude.action': 'COMPARTIR GRATITUD',
    'care.home.footer': 'Tu comunidad está aquí para sostenerte en oración.',

    'care.support.title': '¿Cómo podemos apoyarte ahora mismo?',
    'care.support.section.type': '¿QUÉ TIPO DE APOYO?',
    'care.support.section.message': 'TU MENSAJE',
    'care.support.section.contact': 'CONTACTO PREFERIDO',
    'care.support.placeholder': 'Cuéntanos cómo podemos caminar contigo...',
    'care.support.crisis': 'Si estás en peligro inmediato, llama a los servicios de emergencia locales.',
    'care.support.send': 'ENVIAR SOLICITUD',
    'care.support.sending': 'Enviando tu mensaje...',
    'care.support.error': 'Algo salió mal. Es posible que tu mensaje no se haya enviado.',
    'care.support.retry': 'INTENTAR DE NUEVO',
    'care.support.saveLocal': 'GUARDAR LOCALMENTE',
    'care.support.saved.title': 'Guardado en este dispositivo',
    'care.support.saved.body': 'Tu mensaje quedó guardado localmente por ahora. Puedes enviarlo más tarde.',
    'care.support.type.pastor': 'Una conversación con un pastor',
    'care.support.type.discipleship': 'Discipulado / próximos pasos',
    'care.support.type.accountability': 'Acompañamiento y responsabilidad',
    'care.support.type.prayer': 'Oración en persona o por llamada',
    'care.support.type.difficult': 'Estoy pasando por algo difícil',
    'care.support.type.newBeliever': 'Recientemente entregué mi vida a Cristo',
    'care.support.type.other': 'Otro',
    'care.support.contact.call': 'Llamada',
    'care.support.contact.text': 'Texto',
    'care.support.contact.email': 'Correo',

    'care.success.kicker': 'APOYO PASTORAL',
    'care.success.title': 'No estás solo.',
    'care.success.message': 'Tu equipo de la iglesia ya fue notificado. Alguien te contactará en cuanto le sea posible.',
    'care.success.disclaimer': 'Si estás en peligro inmediato, llama a los servicios de emergencia locales.',
    'care.success.back': 'VOLVER A CUIDADO',
    'care.success.returnHome': 'VOLVER AL INICIO',
    'care.success.submitPrayer': 'ENVIAR UNA ORACIÓN',

    'care.prayer.alert.title': 'Oración enviada',
    'care.prayer.alert.body': 'Tu solicitud fue recibida. Un pastor la revisará en el panel.',
    'care.prayer.alert.done': 'LISTO',
    'care.prayer.alert.needSupport': 'NECESITO MÁS APOYO',
    'care.prayer.title': '¿Cómo podemos orar por ti?',
    'care.prayer.label': 'PETICIÓN DE ORACIÓN',
    'care.prayer.placeholder': '¿Por qué te gustaría oración hoy?',
    'care.prayer.action': 'COMPARTIR ORACIÓN',
    'care.prayer.anonymous.title': 'Publicar de forma anónima',
    'care.prayer.anonymous.subtitle': 'Tu nombre estará oculto en la vista del equipo pastoral',
    'care.prayer.support.title': 'Solicitar apoyo pastoral',
    'care.prayer.support.subtitle': 'Un líder se comunicará para caminar contigo',

    'care.testimony.alert.title': 'Testimonio enviado',
    'care.testimony.alert.body': 'Tu testimonio fue enviado y aparecerá en el panel pastoral.',
    'care.testimony.title': '¿Dónde has visto la fidelidad de Dios?',
    'care.testimony.label': 'TESTIMONIO',
    'care.testimony.placeholder': 'Comparte un momento de gracia...',
    'care.testimony.anonymous': 'Compartir de forma anónima',
    'care.testimony.allowShare': 'Permitir que la iglesia lo comparta como ánimo',
    'care.testimony.action': 'COMPARTIR GRATITUD',
    'care.testimony.footer': 'Tu historia fortalece a la iglesia.',

    'journey.title': 'Camino',
    'journey.library': 'BIBLIOTECA',
    'journey.favorites': 'FAVORITOS',
    'journey.calendar': 'CALENDARIO',
    'journey.favoritesEmpty': 'Tu camino aparecerá aquí con el tiempo.',
    'journey.favoritesCta': 'ESCRIBE TU PRIMERA REFLEXIÓN',
    'journey.quick.insights': 'INICIO DE INSIGHTS',
    'journey.quick.awareness': 'AWARENESS PASADA',
    'journey.legend.reflection': 'Reflexión',
    'journey.legend.mood': 'Estado',
    'journey.legend.sunday': 'Domingo',
    'journey.emptyPrompt': 'Selecciona un día para revisar tu caminar.',
    'journey.dayDetail.title': 'Detalle del día',
    'journey.dayDetail.loading': 'Cargando día...',
    'journey.dayDetail.innerPosture': 'POSTURA INTERIOR',
    'journey.dayDetail.reflection': 'REFLEXIÓN',
    'journey.dayDetail.fromSunday': 'DESDE EL DOMINGO',
    'journey.dayDetail.empty': 'No hay entradas guardadas para este día.',
    'journey.dayDetail.addReflection': 'AGREGAR REFLEXIÓN',
    'journey.dayDetail.logMood': 'REGISTRAR ESTADO',
    'journey.dayDetail.readOnlyPast': 'Los días pasados son solo de lectura.',
    'journey.dayDetail.error': 'No se pudo cargar este día.',
    'journey.dayDetail.retry': 'REINTENTAR',

    'reflection.subtitle.today': 'REFLEXIÓN DE HOY',
    'reflection.subtitle.midweek': 'REFLEXIÓN DE MITAD DE SEMANA',
    'reflection.invitation.dailyLabel': 'INVITACIÓN DIARIA',
    'reflection.invitation.midweekLabel': 'INVITACIÓN DE MITAD DE SEMANA',
    'reflection.invitation.dailyText': '"¿Qué permaneció contigo hoy?"',
    'reflection.invitation.midweekText': '"¿Qué está trayendo Dios a la superficie en ti hoy?"',
    'reflection.placeholder': 'Escribe tu reflexión aquí...',
    'reflection.save': 'GUARDAR EN CAMINO',
    'reflection.update': 'ACTUALIZAR REFLEXIÓN',
    'reflection.needMore': '¿Necesitas más que oración?',
    'reflection.privacy': 'Este espacio es entre tú y Dios. Tus reflexiones permanecen privadas.',
    'reflection.detail.title': 'REFLEXIÓN',
    'reflection.detail.sundayMessage': 'MENSAJE DEL DOMINGO',
    'reflection.detail.invitation': 'LA INVITACIÓN',
    'reflection.detail.words': 'TUS PALABRAS',
    'reflection.detail.empty': 'No hay reflexión guardada para esta entrada.',
    'reflection.detail.backToJourney': 'VOLVER AL CAMINO',
    'reflection.detail.edit': 'EDITAR',
    'reflection.detail.delete': 'ELIMINAR',
    'reflection.detail.deleteTitle': '¿Eliminar reflexión?',
    'reflection.detail.deleteBody': 'Esto eliminará permanentemente la reflexión de tu historial de camino.',
    'reflection.detail.cancel': 'Cancelar',
    'reflection.moodCurrent': 'Estado actual:',
    'reflection.quote': '"Un momento con Dios nunca se desperdicia."',

    'insights.header': 'INSIGHTS',
    'insights.title': 'Observa cómo se ha sentido esta semana.',
    'insights.rhythm': 'RITMO DE ESTA SEMANA',
    'insights.earlier': 'Antes',
    'insights.now': 'Ahora',
    'insights.optional': 'Basado en tus check-ins opcionales',
    'insights.reflectionPresence': 'PRESENCIA DE REFLEXIÓN',
    'insights.reflectionStat': 'Te detuviste a reflexionar 3 días esta semana',
    'insights.reflectionSub': 'La reflexión formó parte de tu semana',
    'insights.notice': 'ALGO QUE NOTAMOS',
    'insights.noticeText': '"Las semanas en que haces una pausa a mitad de semana suelen sentirse más estables."',
    'insights.footer': 'Estos insights son para conciencia, no para evaluación.',

    'mood.skip': 'OMITIR',
    'mood.subtitle': 'AWARENESS EMOCIONAL',
    'mood.title': '¿Cómo te sientes ahora mismo?',
    'mood.continue': 'CONTINUAR',
    'mood.note': 'Un momento para la reflexión interior.',
    'mood.needMore': '¿Necesitas más que oración?',
    'mood.label.peaceful': 'En paz',
    'mood.label.rushed': 'Acelerado',
    'mood.label.anxious': 'Ansioso',
    'mood.label.grateful': 'Agradecido',
    'mood.label.tired': 'Cansado',
    'mood.label.focused': 'Enfocado',

    'moodDetail.subtitle': 'AWARENESS PASADA',
    'moodDetail.innerPosture': 'POSTURA INTERIOR',
    'moodDetail.journalEntry': 'ENTRADA DE JOURNAL',
    'moodDetail.footer': 'Parte de tu ritmo semanal',
    'moodDetail.title.tired': 'Cansado',
    'moodDetail.title.rushed': 'Acelerado',
    'moodDetail.title.grateful': 'Agradecido',
    'moodDetail.title.peaceful': 'En paz',
    'moodDetail.title.focused': 'Enfocado',
    'moodDetail.title.anxious': 'Ansioso',
    'moodDetail.desc.tired': 'Marcaste este momento como cansado. La baja energía es una señal para descansar, no una exigencia de productividad. Fuiste invitado a exhalar y confiar en Dios con tu cansancio.',
    'moodDetail.desc.rushed': 'Marcaste este momento como acelerado. Esta postura resalta el ritmo, no el fracaso. Fuiste invitado a calmar tu corazón y encontrar un momento de gracia sin prisa.',
    'moodDetail.desc.grateful': 'Marcaste este momento como agradecido. Esta postura amplifica tu conciencia de la presencia de Dios. Fuiste invitado a descansar en esta alegría.',
    'moodDetail.desc.peaceful': 'Marcaste este momento como en paz. En este estado receptivo, fuiste invitado a notar la gracia y escuchar la voz suave de Dios.',
    'moodDetail.desc.focused': 'Marcaste este momento como enfocado. La claridad y la atención permitieron que tus intenciones fluyeran de forma natural. Fuiste invitado a caminar con propósito.',
    'moodDetail.desc.anxious': 'Marcaste este momento como ansioso. Este ruido mental es solo una señal para la oración y la ternura. Fuiste invitado a respirar profundo y recordar que estás sostenido.',

    'support.alert.title': 'Mensaje enviado',
    'support.alert.body': 'Gracias por comunicarte. Un miembro del equipo pastoral dará seguimiento.',
    'support.header': 'AYUDA',
    'support.title': '¿Cómo podemos caminar contigo?',
    'support.messageLabel': 'TU MENSAJE',
    'support.placeholder': 'Cuéntanos cómo podemos apoyarte...',
    'support.send': 'ENVIAR MENSAJE',
    'support.faq': 'Ver FAQs',
    'support.guidelines': 'Guías de uso sagrado',
    'support.footer': 'Nuestro equipo está aquí para apoyar tu camino.',
    'faq.title': 'Preguntas Frecuentes',
    'faq.q1': '¿Mi camino realmente es privado?',
    'faq.a1': 'Sí. Tus reflexiones permanecen en tu dispositivo en este MVP y solo tú las puedes ver.',
    'faq.q2': '¿Qué pasa si me pierdo un día de formación?',
    'faq.a2': 'Aquí no hay rachas. Dios te encuentra exactamente donde estás.',
    'faq.q3': '¿Cómo puedo apoyar a otros?',
    'faq.a3': 'Puedes enviar oración y testimonio en Cuidado para que tu equipo de iglesia dé seguimiento.',
    'faq.footerHint': '¿Aún buscas guía?',
    'faq.supportCta': 'CONTACTAR APOYO PASTORAL',
  },
};

const getDefaultLocale = (): SupportedLocale => {
  const savedLocale = Settings.get('mkp.locale');
  if (savedLocale === 'en' || savedLocale === 'es') {
    return savedLocale;
  }

  const locale = Intl.DateTimeFormat().resolvedOptions().locale.toLowerCase();
  if (locale.startsWith('es')) {
    return 'es';
  }
  return 'en';
};

type I18nContextValue = {
  locale: SupportedLocale;
  setLocale: (locale: SupportedLocale) => void;
  t: (key: string) => string;
};

const I18nContext = createContext<I18nContextValue | null>(null);

export const I18nProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [locale, setLocaleState] = useState<SupportedLocale>(getDefaultLocale);

  const setLocale = useCallback((nextLocale: SupportedLocale) => {
    Settings.set({ 'mkp.locale': nextLocale });
    setLocaleState(nextLocale);
  }, []);

  const t = useCallback(
    (key: string) => dictionaries[locale][key] ?? dictionaries.en[key] ?? key,
    [locale]
  );

  const value = useMemo(
    () => ({
      locale,
      setLocale,
      t,
    }),
    [locale, setLocale, t]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useI18n = (): I18nContextValue => {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error('useI18n must be used within I18nProvider');
  }
  return context;
};
